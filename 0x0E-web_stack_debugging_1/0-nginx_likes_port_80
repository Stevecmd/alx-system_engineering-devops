#!/usr/bin/env bash
# Fixes for Nginx to ensure it's running and listening on port 80

# Update the Nginx configuration to listen on port 80
sudo sed -i "s/listen 8080 default_server;/listen 80 default_server;/" /etc/nginx/sites-enabled/default
sudo sed -i "s/listen \[::\]:8080 default_server;/listen \[::\]:80 default_server;/" /etc/nginx/sites-enabled/default

# Remove the Nginx PID file to ensure Nginx can start without issues
sudo rm /run/nginx.pid
sudo rm /run/nginx.pid
sudo rm /var/run/nginx.pid
sudo rm /var/run/nginx/nginx.pid

# Restart Nginx to apply the changes
sudo service nginx restart
